## 第3章 函数作用域和块作用域

### 3.1 函数中的作用域

函数作用域

* 属于这个函数的全部变量都可以在整个函数的范围内使用及复用（在嵌套的作用域中也可以使用）。

### 3.2 隐藏内部实现

基于作用域的隐藏方法

* 从所写代码中挑出一个片段，用函数声明把它包装起来，就相当于在这个代码片段的周围创建了一个作用域气泡。这个作用域**隐藏**了包裹的变量和函数。

依赖的原则

* 软件设计中，应该**最小限度地暴露必要内容**，将其他内容都隐藏起来。比如模块或对象的API设计。

这样做的优势

* 将具体内容私有化。否则，外部作用域对私有变量和函数的访问权限会导致风险（有意或无意地使用）。

* 避免同名标识符之间的冲突。

b 和 doSomethingElse(...) 都无法从外部被访问。

    function doSomething(a) {
        function doSomethingElse(a) {
            return a - 1
        }
        var b
        b = a + doSomethingElse(a * 2)
        console.log(b * 3)
    }
    doSomething(2)

bar(...) 中的 `var i = 3` 是本地变量，会遮蔽 for 循环中的 i；如果情况允许，使用其他标识符 `var j = 3`。

    function foo() {
        function bar(a) {
            var i = 3
            console.log(a + i)
        }
        for (var i = 0; i < 10; i++) {
            bar(i * 2)
        }
    }

---

### 3.3 函数作用域

3.3.1 匿名和具名

3.3.2 立即执行函数表达式

### 3.4 块作用域
